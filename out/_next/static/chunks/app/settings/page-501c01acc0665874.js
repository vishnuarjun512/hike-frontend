(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{4893:(e,t,a)=>{Promise.resolve().then(a.bind(a,3707))},3707:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>W});var r=a(5155),s=a(2115),n=a(4085),l=a(2336),i=a(5785),o=a(3610),d=a(8068),c=a(8166),u=a(1488),p=a(7510);a(7650);var f=s.forwardRef((e,t)=>{let{children:a,...n}=e,l=s.Children.toArray(a),i=l.find(x);if(i){let e=i.props.children,a=l.map(t=>t!==i?t:s.Children.count(e)>1?s.Children.only(null):s.isValidElement(e)?e.props.children:null);return(0,r.jsx)(m,{...n,ref:t,children:s.isValidElement(e)?s.cloneElement(e,void 0,a):null})}return(0,r.jsx)(m,{...n,ref:t,children:a})});f.displayName="Slot";var m=s.forwardRef((e,t)=>{let{children:a,...r}=e;if(s.isValidElement(a)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,a=t&&"isReactWarning"in t&&t.isReactWarning;return a?e.ref:(a=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(a),n=function(e,t){let a={...t};for(let r in t){let s=e[r],n=t[r];/^on[A-Z]/.test(r)?s&&n?a[r]=(...e)=>{n(...e),s(...e)}:s&&(a[r]=s):"style"===r?a[r]={...s,...n}:"className"===r&&(a[r]=[s,n].filter(Boolean).join(" "))}return{...e,...a}}(r,a.props);return a.type!==s.Fragment&&(n.ref=t?(0,d.t)(t,e):e),s.cloneElement(a,n)}return s.Children.count(a)>1?s.Children.only(null):null});m.displayName="SlotClone";var h=({children:e})=>(0,r.jsx)(r.Fragment,{children:e});function x(e){return s.isValidElement(e)&&e.type===h}var g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let a=s.forwardRef((e,a)=>{let{asChild:s,...n}=e,l=s?f:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(l,{...n,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{}),v="Switch",[b,y]=(0,c.A)(v),[j,w]=b(v),N=s.forwardRef((e,t)=>{let{__scopeSwitch:a,name:n,checked:l,defaultChecked:i,required:c,disabled:p,value:f="on",onCheckedChange:m,form:h,...x}=e,[v,b]=s.useState(null),y=(0,d.s)(t,e=>b(e)),w=s.useRef(!1),N=!v||h||!!v.closest("form"),[k=!1,S]=(0,u.i)({prop:l,defaultProp:i,onChange:m});return(0,r.jsxs)(j,{scope:a,checked:k,disabled:p,children:[(0,r.jsx)(g.button,{type:"button",role:"switch","aria-checked":k,"aria-required":c,"data-state":C(k),"data-disabled":p?"":void 0,disabled:p,value:f,...x,ref:y,onClick:(0,o.m)(e.onClick,e=>{S(e=>!e),N&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),N&&(0,r.jsx)(E,{control:v,bubbles:!w.current,name:n,value:f,checked:k,required:c,disabled:p,form:h,style:{transform:"translateX(-100%)"}})]})});N.displayName=v;var k="SwitchThumb",S=s.forwardRef((e,t)=>{let{__scopeSwitch:a,...s}=e,n=w(k,a);return(0,r.jsx)(g.span,{"data-state":C(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t})});S.displayName=k;var E=e=>{let{control:t,checked:a,bubbles:n=!0,...l}=e,i=s.useRef(null),o=function(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(a),d=(0,p.X)(t);return s.useEffect(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==a&&t){let r=new Event("click",{bubbles:n});t.call(e,a),e.dispatchEvent(r)}},[o,a,n]),(0,r.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...l,tabIndex:-1,ref:i,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function C(e){return e?"checked":"unchecked"}var R=a(9602);let O=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(N,{className:(0,R.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...s,ref:t,children:(0,r.jsx)(S,{className:(0,R.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});O.displayName=N.displayName;var _=a(4288),A=a(689);let P=_.bL;_.l9;let T=_.ZL;_.bm;let I=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(_.hJ,{ref:t,className:(0,R.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});I.displayName=_.hJ.displayName;let D=s.forwardRef((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsxs)(T,{children:[(0,r.jsx)(I,{}),(0,r.jsxs)(_.UC,{ref:t,className:(0,R.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[s,(0,r.jsxs)(_.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(A.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});D.displayName=_.UC.displayName;let U=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,R.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};U.displayName="DialogHeader";let M=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,R.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};M.displayName="DialogFooter";let F=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(_.hE,{ref:t,className:(0,R.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});F.displayName=_.hE.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(_.VY,{ref:t,className:(0,R.cn)("text-sm text-muted-foreground",a),...s})}).displayName=_.VY.displayName;var V=a(241),z=a(6248),J=a(2651);let L=e=>{let{isOpen:t,setIsOpen:a,setProfilePic:l}=e,[i,o]=(0,s.useState)(!1),[d,c]=(0,s.useState)(null),{user:u,setUser:p}=(0,z.k)(),[f,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{(null==u?void 0:u._id)&&m(u._id)},[u]);let h=async()=>{if(d&&u){o(!0);try{let e="http://localhost:5000/api";console.log("User ID:",f);let{data:{profilePicUrl:t}}=await J.A.post("".concat(e,"/user/getUploadUrl"),{userId:f,filename:d.name,filetype:d.type});try{await J.A.put(t,d,{headers:{"Content-Type":d.type}})}catch(e){console.error("Error uploading file:",e);return}let r=await J.A.post("".concat(e,"/user/updateProfilePic"),{userId:f,profilePicUrl:t});if(console.log(r.data),200!==r.status){(0,V.oR)({title:"Error",description:"Failed to update profile picture.",variant:"destructive"});return}(0,V.oR)({title:"Profile picture updated successfully",description:"Your profile picture has been updated."}),l(t),p(r.data.user),a(!1)}catch(e){console.error("Upload error:",e)}finally{o(!1)}}};return(0,r.jsx)(P,{open:t,onOpenChange:a,children:(0,r.jsxs)(D,{children:[(0,r.jsx)(U,{children:(0,r.jsx)(F,{children:"Upload Profile Picture"})}),d&&(0,r.jsx)("img",{src:URL.createObjectURL(d),alt:"Preview",className:"w-32 h-32 rounded-full mx-auto mb-2"}),(0,r.jsx)("input",{type:"file",accept:"image/*",disabled:i,onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&c(a)}}),(0,r.jsxs)(M,{children:[(0,r.jsx)(n.$,{variant:"outline",onClick:()=>a(!1),disabled:i,children:"Cancel"}),(0,r.jsx)(n.$,{onClick:h,disabled:i||!d,children:i?"Uploading...":"Upload"})]})]})})};var $=a(3898),B=a(9736);let H=e=>{let{isOpen:t,setIsOpen:a,profilePic:s}=e;return(0,r.jsx)(P,{open:t,onOpenChange:a,children:(0,r.jsxs)(D,{className:"w-fit-content",children:[(0,r.jsx)(U,{children:(0,r.jsx)(F,{children:"Profile Picture"})}),(0,r.jsx)("div",{className:"flex justify-center",children:s&&(0,r.jsx)("img",{src:s,alt:"Enlarged Profile Pic",className:"w-full h-full object-contain"})}),(0,r.jsx)(M,{children:(0,r.jsx)(n.$,{onClick:()=>a(!1),children:"Close"})})]})})};function W(){let[e,t]=(0,s.useState)(""),[a,o]=(0,s.useState)(""),[d,c]=(0,s.useState)(!0),[u,p]=(0,s.useState)(null),[f,m]=(0,s.useState)(!1),[h,x]=(0,s.useState)(!1),{user:g}=(0,z.k)();(0,s.useEffect)(()=>{g&&(t(g.name||""),o(g.email||""),p(g.profilePic||null))},[g]);let v=async t=>{t.preventDefault();try{let t=await J.A.put("".concat("http://localhost:5000/api","/user/").concat(null==g?void 0:g._id),{updatedData:{name:e,email:a}});if(!t.data.success)throw(0,V.oR)({variant:"destructive",title:"Updated Failed",description:t.data.message}),Error("Failed to update settings");(0,V.oR)({title:"Settings Updated",description:t.data.message}),console.log("Settings updated:",t.data)}catch(e){console.error("Error updating settings:",e)}},b=(0,s.useMemo)(()=>u?"".concat(u,"?t=").concat(new Date().getTime()):"",[u]);return(0,r.jsxs)("div",{className:"max-w-2xl",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Settings"}),(0,r.jsx)(L,{isOpen:f,setIsOpen:m,setProfilePic:p}),(0,r.jsx)(H,{isOpen:h,setIsOpen:x,profilePic:u}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:" flex justify-center items-center flex-col gap-3",children:[(0,r.jsxs)($.Avatar,{onClick:()=>x(!0),className:" cursor-pointer font-bold text-black size-[300px] bg-gray-300 flex justify-center items-center",children:[(0,r.jsx)(B.BK,{alt:(null==g?void 0:g.name)+"'s profile pic",src:b||""}),(0,r.jsx)(B.q5,{className:"text-4xl",children:g&&g.name&&(null==g?void 0:g.name[0].toUpperCase())})]}),(0,r.jsx)(n.$,{className:"w-fit",onClick:()=>m(!0),children:"Change Profile Picture"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"name",children:"Name"}),(0,r.jsx)(l.p,{id:"name",value:e,onChange:e=>t(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(l.p,{id:"email",type:"email",value:a,onChange:e=>o(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(O,{id:"notifications",checked:d,onCheckedChange:c}),(0,r.jsx)(i.J,{htmlFor:"notifications",children:"Enable notifications"})]}),(0,r.jsx)(n.$,{onClick:v,type:"submit",children:"Save Changes"})]})]})}},3898:(e,t,a)=>{"use strict";a.d(t,{Avatar:()=>i,AvatarFallback:()=>d,AvatarImage:()=>o});var r=a(5155),s=a(2115),n=a(9736),l=a(9602);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.bL,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...s})});i.displayName=n.bL.displayName;let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n._V,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",a),...s})});o.displayName=n._V.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.H4,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...s})});d.displayName=n.H4.displayName},4085:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>o});var r=a(5155),s=a(2115),n=a(7088),l=a(1027),i=a(9602);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:a})),ref:t,...c})});d.displayName="Button"},2336:(e,t,a)=>{"use strict";a.d(t,{p:()=>u});var r=a(698),s=a(5155),n=a(2115),l=a(9602),i=a(4420),o=a(186),d=a(5381);function c(){let e=(0,r._)(["\n        radial-gradient(\n          "," circle at ","px ","px,\n          var(--blue-500),\n          transparent 80%\n        )\n      "]);return c=function(){return e},e}let u=n.forwardRef((e,t)=>{let{className:a,type:r,...u}=e,[p,f]=n.useState(!1),m=(0,i.d)(0),h=(0,i.d)(0);return(0,s.jsx)(o.P.div,{style:{background:(0,d.E)(c(),p?"100px":"0px",m,h)},onMouseMove:function(e){let{currentTarget:t,clientX:a,clientY:r}=e,{left:s,top:n}=t.getBoundingClientRect();m.set(a-s),h.set(r-n)},onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),className:"p-[2px] rounded-lg transition duration-300 group/input",children:(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full border-none bg-gray-50 dark:bg-zinc-800 text-black dark:text-white shadow-input rounded-md px-3 py-2 text-sm  file:border-0 file:bg-transparent \n          file:text-sm file:font-medium placeholder:text-neutral-400 dark:placeholder-text-neutral-600 \n          focus-visible:outline-none focus-visible:ring-[2px]  focus-visible:ring-neutral-400 dark:focus-visible:ring-neutral-600\n           disabled:cursor-not-allowed disabled:opacity-50\n           dark:shadow-[0px_0px_1px_1px_var(--neutral-700)]\n           group-hover/input:shadow-none transition duration-400\n           ",a),ref:t,...u})})});u.displayName="Input"},5785:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var r=a(5155),s=a(2115),n=a(6195),l=a(9602);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.b,{ref:t,className:(0,l.cn)("text-sm font-medium text-black dark:text-white leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...s})});i.displayName=n.b.displayName},241:(e,t,a)=>{"use strict";a.d(t,{dj:()=>p,oR:()=>u});var r=a(2115);let s=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function p(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9602:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(3463),s=a(9795);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},6248:(e,t,a)=>{"use strict";a.d(t,{k:()=>r});let r=(0,a(9827).v)(e=>({user:null,loadUser:()=>{let t=localStorage.getItem("user");t&&e({user:JSON.parse(t)})},setUser:t=>{localStorage.setItem("user",JSON.stringify(t)),e({user:t})},clearUser:()=>{localStorage.removeItem("user"),e({user:null})}}))}},e=>{var t=t=>e(e.s=t);e.O(0,[440,22,262,651,285,376,441,517,358],()=>t(4893)),_N_E=e.O()}]);