(()=>{var e={};e.id=872,e.ids=[872],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},1496:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>a.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>l});var t=s(260),i=s(8203),n=s(5155),a=s.n(n),d=s(7292),o={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(r,o);let l=["",{children:["friends",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,2762)),"F:\\Web Projects\\hike\\frontend\\app\\friends\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5861)),"F:\\Web Projects\\hike\\frontend\\app\\friends\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,9611)),"F:\\Web Projects\\hike\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["F:\\Web Projects\\hike\\frontend\\app\\friends\\page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/friends/page",pathname:"/friends",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},8175:(e,r,s)=>{Promise.resolve().then(s.bind(s,4052)),Promise.resolve().then(s.bind(s,4061)),Promise.resolve().then(s.bind(s,9773))},8007:(e,r,s)=>{Promise.resolve().then(s.bind(s,1472)),Promise.resolve().then(s.bind(s,33)),Promise.resolve().then(s.bind(s,7201))},8474:(e,r,s)=>{Promise.resolve().then(s.bind(s,5861))},1522:(e,r,s)=>{Promise.resolve().then(s.bind(s,8625))},1472:(e,r,s)=>{"use strict";s.d(r,{FriendList:()=>u});var t=s(5512),i=s(8009),n=s(7643),a=s(1846),d=s(7021),o=s(8344),l=s(5668),c=s(801),p=s(1301);function u(){let[e,r]=(0,i.useState)([]),[s,u]=(0,i.useState)(!0),{user:m}=(0,o.k)(),x=async e=>{if(m?.id){u(!0);try{let s=await l.A.post(`http://13.235.69.86:5000/api/friend/unfriend/${m?.id}`,{unfriendId:e});if(s.data.error)throw(0,c.oR)({variant:"destructive",title:"Unfriend Failed",description:s.data.message}),Error("Failed to Unfriend");r(s.data.friends)}catch(e){console.error("Error Unfriending:",e)}finally{u(!1)}}};return(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Your Friends"})}),(0,t.jsx)(n.Wu,{children:s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Loading friends..."}),(0,t.jsx)(p.N,{times:3})]}):e&&0!==e.length?(0,t.jsx)("ul",{className:"space-y-4",children:e.map(e=>(0,t.jsxs)("li",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(a.Avatar,{children:[(0,t.jsx)(a.AvatarImage,{src:e.profilePic||"",alt:e.name}),(0,t.jsx)(a.AvatarFallback,{children:e.name[0]})]}),(0,t.jsx)("span",{children:e.name})]}),(0,t.jsx)(d.$,{onClick:()=>{x(e.id)},variant:"outline",size:"sm",children:"Unfriend"})]},e.id))}):(0,t.jsx)("p",{children:"No friends found."})})]})}},33:(e,r,s)=>{"use strict";s.d(r,{FriendRequests:()=>m});var t=s(5512),i=s(8009),n=s(7643),a=s(1846),d=s(7021),o=s(5668),l=s(8344),c=s(801),p=s(9334),u=s(1301);function m(){let[e,r]=(0,i.useState)([]),{user:s}=(0,l.k)(),m=(0,p.useRouter)(),[x,f]=(0,i.useState)(!0),[h,v]=(0,i.useState)(null),j=async e=>{if(s?.id){f(!0),v(null);try{let r=await o.A.get(`http://13.235.69.86:5000/api/friend/accept/${e}`);console.log(r.data),r.data.success?(0,c.oR)({title:"Friend Request Accepted",description:(0,t.jsxs)("div",{className:" w-full flex flex-row items-center justify-between gap-3",children:[(0,t.jsxs)("p",{children:["Congrats! You're friends with ",r.data.newFriend.name,"!"]}),(0,t.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>{m.push(`/messages/${r.data.newFriend.id}`)},children:["Message ",r.data.receiverName]})]})}):(0,c.oR)({variant:"destructive",title:"Friend Request Failed",description:r.data.message})}catch(r){let e="Something went wrong!";e=r.response?r.response.data?.message||"Server error occurred!":r.request?"No response from the server. Please check your network!":r.message||"Unexpected error occurred!",(0,c.oR)({variant:"destructive",title:"Friend Acceptation Failed",description:e})}finally{f(!1)}}},g=async e=>{if(s?.id){f(!0),v(null);try{let s=await o.A.delete(`http://13.235.69.86:5000/api/friend/decline/${e}`);s.data.success?((0,c.oR)({title:"Friend Request Declined",description:"You have declined the friend request."}),r(r=>r.filter(r=>r.requestId!==e))):(0,c.oR)({variant:"destructive",title:"Decline Failed",description:s.data.message})}catch(r){let e="Something went wrong!";e=r.response?r.response.data?.message||"Server error occurred!":r.request?"No response from the server. Please check your network!":r.message||"Unexpected error occurred!",(0,c.oR)({variant:"destructive",title:"Decline Failed",description:e})}finally{f(!1)}}};return(0,t.jsxs)(n.Zp,{children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Friend Requests"})}),(0,t.jsx)(n.Wu,{children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Loading..."}),(0,t.jsx)(u.N,{times:2})]}):h?(0,t.jsx)("p",{className:"text-gray-500",children:h}):e&&0!==e.length?(0,t.jsx)("ul",{className:"space-y-4",children:e.map(e=>(0,t.jsxs)("li",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(a.Avatar,{children:[(0,t.jsx)(a.AvatarImage,{src:e.profileImage||"/avatars/default.png",alt:e.name}),(0,t.jsx)(a.AvatarFallback,{children:e.name?.[0]||"?"})]}),(0,t.jsx)("span",{children:e.name})]}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsx)(d.$,{variant:"default",size:"sm",onClick:()=>{j(e.requestId)},children:"Accept"}),(0,t.jsx)(d.$,{variant:"outline",size:"sm",onClick:()=>g(e.requestId),children:"Decline"})]})]},e.requestId))}):(0,t.jsx)("p",{children:"No friend requests available."})})]})}},7201:(e,r,s)=>{"use strict";s.d(r,{RecommendedList:()=>u});var t=s(5512),i=s(7643),n=s(1846),a=s(7021),d=s(8009),o=s(5668),l=s(801),c=s(8344),p=s(1301);function u(){let{toast:e}=(0,l.dj)(),{user:r}=(0,c.k)(),[s,u]=(0,d.useState)([]),[m,x]=(0,d.useState)(!0),[f,h]=(0,d.useState)(null),v=async s=>{if(!r||!r.id){e({variant:"destructive",title:"Friend Request Failed",description:"User data is not loaded. Please refresh and try again."});return}try{let t=await o.A.post("http://13.235.69.86:5000/api/friend/send",{senderId:r.id,receiverId:s});t.data.success?e({title:"Friend Request Sent",description:`Wait for ${t.data.receiverName} to accept your request.`}):e({variant:"destructive",title:"Friend Request Failed",description:t.data.message})}catch(r){e({variant:"destructive",title:"Friend Request Failed",description:r.response?r.response.data?.message||"Server error occurred!":r.request?"No response from the server. Please check your network!":r.message||"Unexpected error occurred!"})}};return(0,t.jsxs)(i.Zp,{children:[(0,t.jsx)(i.aR,{children:(0,t.jsx)(i.ZB,{children:"Recommended Friends"})}),(0,t.jsx)(i.Wu,{children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{className:"text-gray-500",children:"Loading recommendations..."}),(0,t.jsx)(p.N,{times:3})]}):f?(0,t.jsx)("p",{className:"text-red-500",children:f}):0===s.length?(0,t.jsx)("p",{className:"text-gray-500",children:"No recommendations available."}):(0,t.jsx)("ul",{className:"space-y-4",children:s.map(e=>(0,t.jsxs)("li",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(n.Avatar,{children:[(0,t.jsx)(n.AvatarImage,{src:`${e.profilePic}`||"",alt:e.name}),(0,t.jsx)(n.AvatarFallback,{children:e.name?.charAt(0).toUpperCase()||"?"})]}),(0,t.jsx)("span",{children:e.name})]}),(0,t.jsx)(a.$,{onClick:()=>v(e.id),variant:"outline",size:"sm",children:"Add Friend"})]},e.id))})})]})}},8625:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var t=s(5512),i=s(8344);s(8009);var n=s(4485),a=s(569);function d({children:e}){(0,i.k)(e=>e.loadUser);let{user:r}=(0,i.k)();return(0,t.jsx)("div",{className:"min-h-screen bg-background dark text-gray-200 ",children:(0,t.jsxs)("div",{className:"md:max-w-6xl mx-auto flex",children:[(0,t.jsx)(n.w,{}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,t.jsxs)("header",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{className:" text-2xl font-semibold",children:["Welcome ",r?.name]}),(0,t.jsx)(a.p,{})]}),(0,t.jsx)("main",{className:"flex-1 overflow-auto p-4",children:e})]})]})})}},1301:(e,r,s)=>{"use strict";s.d(r,{N:()=>a});var t=s(5512),i=s(9462);function n({className:e,...r}){return(0,t.jsx)("div",{className:(0,i.cn)("animate-pulse rounded-md bg-primary/10",e),...r})}let a=({times:e=3})=>(0,t.jsx)(t.Fragment,{children:Array.from({length:e}).map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,t.jsx)(n,{className:"h-12 w-12 rounded-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n,{className:"h-4 w-[250px]"}),(0,t.jsx)(n,{className:"h-4 w-[200px]"})]})]},r))})},7643:(e,r,s)=>{"use strict";s.d(r,{Wu:()=>l,ZB:()=>o,Zp:()=>a,aR:()=>d});var t=s(5512),i=s(8009),n=s(9462);let a=i.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));a.displayName="Card";let d=i.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));d.displayName="CardHeader";let o=i.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...r}));o.displayName="CardTitle",i.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...r})).displayName="CardDescription";let l=i.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent",i.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter"},4052:(e,r,s)=>{"use strict";s.d(r,{FriendList:()=>t});let t=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call FriendList() from the server but FriendList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Web Projects\\hike\\frontend\\app\\friends\\(FriendsComponents)\\FriendList.tsx","FriendList")},4061:(e,r,s)=>{"use strict";s.d(r,{FriendRequests:()=>t});let t=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call FriendRequests() from the server but FriendRequests is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Web Projects\\hike\\frontend\\app\\friends\\(FriendsComponents)\\FriendRequest.tsx","FriendRequests")},9773:(e,r,s)=>{"use strict";s.d(r,{RecommendedList:()=>t});let t=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call RecommendedList() from the server but RecommendedList is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Web Projects\\hike\\frontend\\app\\friends\\(FriendsComponents)\\RecommendFriends.tsx","RecommendedList")},5861:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"F:\\\\Web Projects\\\\hike\\\\frontend\\\\app\\\\friends\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Web Projects\\hike\\frontend\\app\\friends\\layout.tsx","default")},2762:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>d});var t=s(2740),i=s(4052),n=s(4061),a=s(9773);function d(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Friends"}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsx)(i.FriendList,{}),(0,t.jsx)(n.FriendRequests,{}),(0,t.jsx)(a.RecommendedList,{})]})]})}}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[638,285,426,223,668,101],()=>s(1496));module.exports=t})();