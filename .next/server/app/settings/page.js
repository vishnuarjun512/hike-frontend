(()=>{var e={};e.id=662,e.ids=[662],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},7e3:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(260),a=r(8203),n=r(5155),i=r.n(n),o=r(7292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5562)),"F:\\Web Projects\\hike\\frontend\\app\\settings\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2293)),"F:\\Web Projects\\hike\\frontend\\app\\settings\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,9611)),"F:\\Web Projects\\hike\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["F:\\Web Projects\\hike\\frontend\\app\\settings\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6588:(e,t,r)=>{Promise.resolve().then(r.bind(r,2293))},3436:(e,t,r)=>{Promise.resolve().then(r.bind(r,4161))},283:(e,t,r)=>{Promise.resolve().then(r.bind(r,5562))},3427:(e,t,r)=>{Promise.resolve().then(r.bind(r,1722))},4161:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(5512),a=r(8344);r(8009);var n=r(4485),i=r(2692);function o({children:e}){(0,a.k)(e=>e.loadUser);let{user:t}=(0,a.k)();return(0,s.jsx)("div",{className:"min-h-screen bg-background dark text-gray-200 ",children:(0,s.jsxs)("div",{className:"md:max-w-6xl mx-auto flex",children:[(0,s.jsx)(n.w,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsxs)("div",{className:" text-2xl font-semibold",children:["Welcome ",t?.name]}),(0,s.jsx)(i.p,{})]}),(0,s.jsx)("main",{className:"flex-1 overflow-auto p-4",children:e})]})]})})}},1722:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var s=r(5512),a=r(8009),n=r(7021),i=r(5409),o=r(7699),l=r(1412),d=r(9952),c=r(6004),u=r(3024),p=r(8762);r(5740);var f=a.forwardRef((e,t)=>{let{children:r,...n}=e,i=a.Children.toArray(r),o=i.find(h);if(o){let e=o.props.children,r=i.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(m,{...n,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,r):null})}return(0,s.jsx)(m,{...n,ref:t,children:r})});f.displayName="Slot";var m=a.forwardRef((e,t)=>{let{children:r,...s}=e;if(a.isValidElement(r)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(r=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(r),n=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{n(...e),a(...e)}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==a.Fragment&&(n.ref=t?(0,d.t)(t,e):e),a.cloneElement(r,n)}return a.Children.count(r)>1?a.Children.only(null):null});m.displayName="SlotClone";var x=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});function h(e){return a.isValidElement(e)&&e.type===x}var g=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=a.forwardRef((e,r)=>{let{asChild:a,...n}=e,i=a?f:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(i,{...n,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),b="Switch",[v,j]=(0,c.A)(b),[y,w]=v(b),k=a.forwardRef((e,t)=>{let{__scopeSwitch:r,name:n,checked:i,defaultChecked:o,required:c,disabled:p,value:f="on",onCheckedChange:m,form:x,...h}=e,[b,v]=a.useState(null),j=(0,d.s)(t,e=>v(e)),w=a.useRef(!1),k=!b||x||!!b.closest("form"),[N=!1,P]=(0,u.i)({prop:i,defaultProp:o,onChange:m});return(0,s.jsxs)(y,{scope:r,checked:N,disabled:p,children:[(0,s.jsx)(g.button,{type:"button",role:"switch","aria-checked":N,"aria-required":c,"data-state":R(N),"data-disabled":p?"":void 0,disabled:p,value:f,...h,ref:j,onClick:(0,l.m)(e.onClick,e=>{P(e=>!e),k&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),k&&(0,s.jsx)(C,{control:b,bubbles:!w.current,name:n,value:f,checked:N,required:c,disabled:p,form:x,style:{transform:"translateX(-100%)"}})]})});k.displayName=b;var N="SwitchThumb",P=a.forwardRef((e,t)=>{let{__scopeSwitch:r,...a}=e,n=w(N,r);return(0,s.jsx)(g.span,{"data-state":R(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:t})});P.displayName=N;var C=e=>{let{control:t,checked:r,bubbles:n=!0,...i}=e,o=a.useRef(null),l=function(e){let t=a.useRef({value:e,previous:e});return a.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(r),d=(0,p.X)(t);return a.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==r&&t){let s=new Event("click",{bubbles:n});t.call(e,r),e.dispatchEvent(s)}},[l,r,n]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:o,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function R(e){return e?"checked":"unchecked"}var E=r(9462);let _=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(k,{className:(0,E.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:(0,s.jsx)(P,{className:(0,E.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));_.displayName=k.displayName;var q=r(3623),S=r(1255);let F=q.bL;q.l9;let A=q.ZL;q.bm;let U=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(q.hJ,{ref:r,className:(0,E.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));U.displayName=q.hJ.displayName;let O=a.forwardRef(({className:e,children:t,...r},a)=>(0,s.jsxs)(A,{children:[(0,s.jsx)(U,{}),(0,s.jsxs)(q.UC,{ref:a,className:(0,E.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,s.jsxs)(q.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(S.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));O.displayName=q.UC.displayName;let $=({className:e,...t})=>(0,s.jsx)("div",{className:(0,E.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});$.displayName="DialogHeader";let W=({className:e,...t})=>(0,s.jsx)("div",{className:(0,E.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});W.displayName="DialogFooter";let M=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(q.hE,{ref:r,className:(0,E.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));M.displayName=q.hE.displayName,a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(q.VY,{ref:r,className:(0,E.cn)("text-sm text-muted-foreground",e),...t})).displayName=q.VY.displayName;var z=r(801),D=r(8344),I=r(5668);let G=({isOpen:e,setIsOpen:t,setProfilePic:r})=>{let[i,o]=(0,a.useState)(!1),[l,d]=(0,a.useState)(null),{user:c,setUser:u}=(0,D.k)(),[p,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{c?._id&&f(c._id)},[c]);let m=async()=>{if(l&&c){o(!0);try{let e="http://localhost:5000/api";console.log("User ID:",p);let{data:{profilePicUrl:s}}=await I.A.post(`${e}/user/getUploadUrl`,{userId:p,filename:l.name,filetype:l.type});try{await I.A.put(s,l,{headers:{"Content-Type":l.type}})}catch(e){console.error("Error uploading file:",e);return}let a=await I.A.post(`${e}/user/updateProfilePic`,{userId:p,profilePicUrl:s});if(console.log(a.data),200!==a.status){(0,z.oR)({title:"Error",description:"Failed to update profile picture.",variant:"destructive"});return}(0,z.oR)({title:"Profile picture updated successfully",description:"Your profile picture has been updated."}),r(s),u(a.data.user),t(!1)}catch(e){console.error("Upload error:",e)}finally{o(!1)}}};return(0,s.jsx)(F,{open:e,onOpenChange:t,children:(0,s.jsxs)(O,{children:[(0,s.jsx)($,{children:(0,s.jsx)(M,{children:"Upload Profile Picture"})}),l&&(0,s.jsx)("img",{src:URL.createObjectURL(l),alt:"Preview",className:"w-32 h-32 rounded-full mx-auto mb-2"}),(0,s.jsx)("input",{type:"file",accept:"image/*",disabled:i,onChange:e=>{let t=e.target.files?.[0];t&&d(t)}}),(0,s.jsxs)(W,{children:[(0,s.jsx)(n.$,{variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),(0,s.jsx)(n.$,{onClick:m,disabled:i||!l,children:i?"Uploading...":"Upload"})]})]})})};var J=r(1846),L=r(25);let V=({isOpen:e,setIsOpen:t,profilePic:r})=>(0,s.jsx)(F,{open:e,onOpenChange:t,children:(0,s.jsxs)(O,{className:"w-fit-content",children:[(0,s.jsx)($,{children:(0,s.jsx)(M,{children:"Profile Picture"})}),(0,s.jsx)("div",{className:"flex justify-center",children:r&&(0,s.jsx)("img",{src:r,alt:"Enlarged Profile Pic",className:"w-full h-full object-contain"})}),(0,s.jsx)(W,{children:(0,s.jsx)(n.$,{onClick:()=>t(!1),children:"Close"})})]})});function T(){let[e,t]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),[d,c]=(0,a.useState)(!0),[u,p]=(0,a.useState)(null),[f,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),{user:g}=(0,D.k)(),b=async t=>{t.preventDefault();try{let t=await I.A.put(`http://localhost:5000/api/user/${g?._id}`,{updatedData:{name:e,email:r}});if(!t.data.success)throw(0,z.oR)({variant:"destructive",title:"Updated Failed",description:t.data.message}),Error("Failed to update settings");(0,z.oR)({title:"Settings Updated",description:t.data.message}),console.log("Settings updated:",t.data)}catch(e){console.error("Error updating settings:",e)}},v=(0,a.useMemo)(()=>u?`${u}?t=${new Date().getTime()}`:"",[u]);return(0,s.jsxs)("div",{className:"max-w-2xl",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Settings"}),(0,s.jsx)(G,{isOpen:f,setIsOpen:m,setProfilePic:p}),(0,s.jsx)(V,{isOpen:x,setIsOpen:h,profilePic:u}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:" flex justify-center items-center flex-col gap-3",children:[(0,s.jsxs)(J.Avatar,{onClick:()=>h(!0),className:" cursor-pointer font-bold text-black size-[300px] bg-gray-300 flex justify-center items-center",children:[(0,s.jsx)(L.BK,{alt:g?.name+"'s profile pic",src:v||""}),(0,s.jsx)(L.q5,{className:"text-4xl",children:g&&g.name&&g?.name[0].toUpperCase()})]}),(0,s.jsx)(n.$,{className:"w-fit",onClick:()=>m(!0),children:"Change Profile Picture"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"name",children:"Name"}),(0,s.jsx)(i.p,{id:"name",value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"email",children:"Email"}),(0,s.jsx)(i.p,{id:"email",type:"email",value:r,onChange:e=>l(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(_,{id:"notifications",checked:d,onCheckedChange:c}),(0,s.jsx)(o.J,{htmlFor:"notifications",children:"Enable notifications"})]}),(0,s.jsx)(n.$,{onClick:b,type:"submit",children:"Save Changes"})]})]})}},5409:(e,t,r)=>{"use strict";r.d(t,{p:()=>d});var s=r(5512),a=r(8009),n=r(9462),i=r(8986),o=r(1967),l=r(4103);let d=a.forwardRef(({className:e,type:t,...r},d)=>{let[c,u]=a.useState(!1),p=(0,i.d)(0),f=(0,i.d)(0);return(0,s.jsx)(o.P.div,{style:{background:(0,l.E)`
        radial-gradient(
          ${c?"100px":"0px"} circle at ${p}px ${f}px,
          var(--blue-500),
          transparent 80%
        )
      `},onMouseMove:function({currentTarget:e,clientX:t,clientY:r}){let{left:s,top:a}=e.getBoundingClientRect();p.set(t-s),f.set(r-a)},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),className:"p-[2px] rounded-lg transition duration-300 group/input",children:(0,s.jsx)("input",{type:t,className:(0,n.cn)(`flex h-10 w-full border-none bg-gray-50 dark:bg-zinc-800 text-black dark:text-white shadow-input rounded-md px-3 py-2 text-sm  file:border-0 file:bg-transparent 
          file:text-sm file:font-medium placeholder:text-neutral-400 dark:placeholder-text-neutral-600 
          focus-visible:outline-none focus-visible:ring-[2px]  focus-visible:ring-neutral-400 dark:focus-visible:ring-neutral-600
           disabled:cursor-not-allowed disabled:opacity-50
           dark:shadow-[0px_0px_1px_1px_var(--neutral-700)]
           group-hover/input:shadow-none transition duration-400
           `,e),ref:d,...r})})});d.displayName="Input"},7699:(e,t,r)=>{"use strict";r.d(t,{J:()=>o});var s=r(5512),a=r(8009),n=r(2405),i=r(9462);let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.b,{ref:r,className:(0,i.cn)("text-sm font-medium text-black dark:text-white leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));o.displayName=n.b.displayName},2293:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"F:\\\\Web Projects\\\\hike\\\\frontend\\\\app\\\\settings\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Web Projects\\hike\\frontend\\app\\settings\\layout.tsx","default")},5562:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"F:\\\\Web Projects\\\\hike\\\\frontend\\\\app\\\\settings\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"F:\\Web Projects\\hike\\frontend\\app\\settings\\page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,285,426,668,356,729,623,998],()=>r(7e3));module.exports=s})();