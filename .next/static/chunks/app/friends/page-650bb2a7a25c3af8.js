(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[872],{7351:(e,t,s)=>{Promise.resolve().then(s.bind(s,2040))},2040:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(5155),a=s(2651),i=s(5007),l=s(4085),d=s(3898),n=s(5488),c=s(4057);let o=(0,c.A)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var u=s(7193),m=s(689);let h=(0,c.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var x=s(2115),f=s(241),p=s(6248);function v(){let[e,t]=(0,x.useState)([]),[s,c]=(0,x.useState)([]),[v,g]=(0,x.useState)([]),[y,j]=(0,x.useState)(!0),[N,b]=(0,x.useState)(!0),[w,A]=(0,x.useState)(!0),{toast:_}=(0,f.dj)(),{user:S}=(0,p.k)(),k=async e=>{try{let s=await a.A.get("".concat("http://localhost:5000/api","/friend/").concat(e));t(s.data.friends),c(s.data.friendRequests.filter(t=>t.receiverId._id===e)),g(s.data.recommendedFriends)}catch(e){console.error("Error fetching friends data:",e),_({title:"Error",description:"Failed to load friends data. Please try again.",variant:"destructive"})}finally{j(!1),b(!1),A(!1)}};(0,x.useEffect)(()=>{(null==S?void 0:S._id)&&k(S._id)},[S]);let E=async e=>{try{let t=null==S?void 0:S._id;await a.A.post("http://localhost:5000/api/friend/sendFR",{senderId:t,receiverId:e}),g(t=>t.filter(t=>t._id!==e)),_({title:"Success",description:"Friend request sent successfully!"}),(null==S?void 0:S._id)&&k(null==S?void 0:S._id)}catch(e){var t,s;console.error("Error sending friend request:",e),_({title:"Error",description:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to send friend request.",variant:"destructive"})}},I=async e=>{try{await a.A.get("".concat("http://localhost:5000/api","/friend/accept/").concat(e)),c(t=>t.filter(t=>t._id!==e)),(null==S?void 0:S._id)&&k(S._id),_({title:"Success",description:"Friend request accepted!"})}catch(e){console.error("Error accepting friend request:",e),_({title:"Error",description:"Failed to accept friend request.",variant:"destructive"})}},R=async e=>{try{await a.A.put("".concat("http://localhost:5000/api","/friend/reject/").concat(e)),c(t=>t.filter(t=>t._id!==e)),_({title:"Success",description:"Friend request rejected."}),(null==S?void 0:S._id)&&k(null==S?void 0:S._id)}catch(e){console.error("Error rejecting friend request:",e),_({title:"Error",description:"Failed to reject friend request.",variant:"destructive"})}},T=async e=>{try{let s=null==S?void 0:S._id;await a.A.delete("".concat("http://localhost:5000/api","/friend/remove/").concat(s,"/").concat(e)),t(t=>t.filter(t=>t._id!==e)),_({title:"Success",description:"Friend removed successfully."}),(null==S?void 0:S._id)&&k(null==S?void 0:S._id)}catch(e){console.error("Error removing friend:",e),_({title:"Error",description:"Failed to remove friend.",variant:"destructive"})}},F=()=>[,,,,].fill(0).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n.E,{className:"h-12 w-12 rounded-full"}),(0,r.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,r.jsx)(n.E,{className:"h-4 w-[200px]"}),(0,r.jsx)(n.E,{className:"h-4 w-[150px]"})]})]},"friend-skeleton-".concat(t)));return(0,r.jsxs)("div",{className:"container mx-auto py-6 max-w-6xl",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-6 text-white",children:"Friends"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)(i.Zp,{className:"bg-gray-900 border-gray-800",children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{className:"text-white",children:"Your Friends"})}),(0,r.jsx)(i.Wu,{className:"space-y-4",children:y?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Loading friends..."}),F()]}):0===e.length?(0,r.jsx)("p",{className:"text-gray-400",children:"You don't have any friends yet."}):e.map(e=>{var t;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(d.Avatar,{children:[(0,r.jsx)(d.AvatarImage,{src:e.profilePic||"/placeholder.svg"}),(0,r.jsx)(d.AvatarFallback,{children:((null==e?void 0:null===(t=e.name)||void 0===t?void 0:t.charAt(0))||"U").toUpperCase()})]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"font-medium text-white",children:e.name})})]}),(0,r.jsxs)(l.$,{variant:"ghost",size:"sm",onClick:()=>T(e._id),className:"text-gray-400 hover:text-red-500",children:[(0,r.jsx)(o,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{children:"Remove"})]})]},"".concat(e._id,"-").concat(e.name))})})]}),(0,r.jsxs)(i.Zp,{className:"bg-gray-900 border-gray-800",children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{className:"text-white",children:"Friend Requests"})}),(0,r.jsx)(i.Wu,{className:"space-y-4",children:N?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Loading..."}),F().slice(0,2)]}):0===s.length?(0,r.jsx)("p",{className:"text-gray-400",children:"No pending friend requests."}):s.map(e=>{var t,s;return(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(d.Avatar,{children:[(0,r.jsx)(d.AvatarImage,{src:e.receiverId.profilePic||"/placeholder.svg"}),(0,r.jsx)(d.AvatarFallback,{children:((null==e?void 0:null===(s=e.receiverId)||void 0===s?void 0:null===(t=s.name)||void 0===t?void 0:t.charAt(0))||"U").toUpperCase()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-white",children:e.receiverId.name}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Wants to be your friend"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>I(e._id),className:"bg-green-600 hover:bg-green-700 text-white border-0",children:[(0,r.jsx)(u.A,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{children:"Accept"})]}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>R(e._id),className:"bg-red-600 hover:bg-red-700 text-white border-0",children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{children:"Reject"})]})]})]},e._id)})})]})]}),(0,r.jsxs)(i.Zp,{className:"mt-6 bg-gray-900 border-gray-800",children:[(0,r.jsx)(i.aR,{children:(0,r.jsx)(i.ZB,{className:"text-white",children:"Recommended Friends"})}),(0,r.jsx)(i.Wu,{children:w?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Loading recommendations..."}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F()})]}):0===v.length?(0,r.jsx)("p",{className:"text-gray-400",children:"No recommendations available at this time."}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(e=>(0,r.jsx)(i.Zp,{className:"bg-gray-800 border-gray-700",children:(0,r.jsx)(i.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)(d.Avatar,{children:[(0,r.jsx)(d.AvatarImage,{src:e.profilePic||"/placeholder.svg"}),(0,r.jsx)(d.AvatarFallback,{children:e.name.charAt(0).toUpperCase()})]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"font-medium text-white",children:e.name})})]}),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>E(e._id),className:"bg-blue-600 hover:bg-blue-700 text-white border-0",children:[(0,r.jsx)(h,{className:"h-4 w-4 mr-1"}),(0,r.jsx)("span",{children:"Add"})]})]})})},e._id))})})]})]})}},3898:(e,t,s)=>{"use strict";s.d(t,{Avatar:()=>d,AvatarFallback:()=>c,AvatarImage:()=>n});var r=s(5155),a=s(2115),i=s(9736),l=s(9602);let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.bL,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});d.displayName=i.bL.displayName;let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i._V,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",s),...a})});n.displayName=i._V.displayName;let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(i.H4,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});c.displayName=i.H4.displayName},4085:(e,t,s)=>{"use strict";s.d(t,{$:()=>c,r:()=>n});var r=s(5155),a=s(2115),i=s(7088),l=s(1027),d=s(9602);let n=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:c=!1,...o}=e,u=c?i.DX:"button";return(0,r.jsx)(u,{className:(0,d.cn)(n({variant:a,size:l,className:s})),ref:t,...o})});c.displayName="Button"},5007:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>o,ZB:()=>n,Zp:()=>l,aR:()=>d,wL:()=>u});var r=s(5155),a=s(2115),i=s(9602);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});l.displayName="Card";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});d.displayName="CardHeader";let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("font-semibold leading-none tracking-tight",s),...a})});n.displayName="CardTitle";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});c.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},5488:(e,t,s)=>{"use strict";s.d(t,{E:()=>i});var r=s(5155),a=s(9602);function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-primary/10",t),...s})}},241:(e,t,s)=>{"use strict";s.d(t,{dj:()=>m,oR:()=>u});var r=s(2115);let a=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},n=[],c={toasts:[]};function o(e){c=d(c,e),n.forEach(e=>{e(c)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>o({type:"DISMISS_TOAST",toastId:s});return o({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(c);return r.useEffect(()=>(n.push(t),()=>{let e=n.indexOf(t);e>-1&&n.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},9602:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(3463),a=s(9795);function i(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},6248:(e,t,s)=>{"use strict";s.d(t,{k:()=>r});let r=(0,s(9827).v)(e=>({user:null,loadUser:()=>{let t=localStorage.getItem("user");t&&e({user:JSON.parse(t)})},setUser:t=>{localStorage.setItem("user",JSON.stringify(t)),e({user:t})},clearUser:()=>{localStorage.removeItem("user"),e({user:null})}}))},7193:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4057).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},689:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(4057).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9827:(e,t,s)=>{"use strict";s.d(t,{v:()=>n});var r=s(2115);let a=e=>{let t;let s=new Set,r=(e,r)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),s.forEach(s=>s(t,e))}},a=()=>t,i={setState:r,getState:a,getInitialState:()=>l,subscribe:e=>(s.add(e),()=>s.delete(e))},l=t=e(r,a,i);return i},i=e=>e?a(e):a,l=e=>e,d=e=>{let t=i(e),s=e=>(function(e,t=l){let s=r.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return r.useDebugValue(s),s})(t,e);return Object.assign(s,t),s},n=e=>e?d(e):d}},e=>{var t=t=>e(e.s=t);e.O(0,[440,22,651,441,517,358],()=>t(7351)),_N_E=e.O()}]);